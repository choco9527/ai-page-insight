// const puppeteer = require('puppeteer-core');
const puppeteer = require('puppeteer');
const {sleep, getTextByOcrSingle} = require('./js/common');
const {launchConfig} = require('./js/constans');
const {_grayData, _initVideo, _getVideoData} = require('./js/helper')


require("@babel/core").transform("code", {
  presets: ["@babel/preset-env"],
});

const main = async function () {
  // 最终需要的数据集合
  const dataMap = {}
  const {page, browser} = await openBrowser() // 打开浏览器
  try {
    await _openPage(page) // 打开页面
    console.log('--sleeping--')
    await sleep(5000);
    console.log('--loading--')
    await injectWindowFuc(page)
    await _initVideo(page)
    console.log('--init--')
    await sleep(2000);
    const videoData = await _getVideoData({
      page,
      currentTime: 60,
    })
    console.log('videoData', videoData);
    return
    // const b = 'data:image/png;base64,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'
    // await getTextByOcrSingle(b)
    return dataMap
  } catch (e) {
    console.warn(e);
    // await browser.close();
    return dataMap
  }
};

async function openBrowser() {
  console.log('正在启动 Chrome')

  const options = {
    executablePath: '/Applications/Google Chrome.app/Contents/MacOS/Google Chrome', // 使用默认的浏览器执行路径
    headless: false, // 无头模式
    args: launchConfig,
    defaultViewport: {width: 1280, height: 800},
    // devtools: true,
    ignoreDefaultArgs: ["--enable-automation"]
  }
  if (process.env.CHROME_PATH) {
    options.executablePath = process.env.CHROME_PATH
  }
  const browser = await puppeteer.launch(options);
  const [p1] = await browser.pages()
  return {page: p1, browser}
}

/**
 * 打开页面
 * @param p
 * @returns {Promise<void>}
 */
async function _openPage(p) {
  const urls = [
    'https://www.bilibili.com/video/BV1Nu411w7DL/?spm_id_from=333.1007.tianma.1-1-1.click',
    'https://www.bilibili.com/video/BV1zm4y1N7zp/?spm_id_from=333.337.search-card.all.click' //
  ]
  const url = urls[0]
  // await p.setBypassCSP(true)
  await p.goto(url);
}

/**
 * 注入页面方法
 * @returns {Promise<void>}
 */
async function injectWindowFuc(page) {
  await page.exposeFunction('sleep', sleep)
  await page.exposeFunction('_grayData', _grayData)
}

main().then(data => {
  console.log('最终数据', data); /*！最终数据！*/
})

/**
 *
 * 准确率 容错率
 */
